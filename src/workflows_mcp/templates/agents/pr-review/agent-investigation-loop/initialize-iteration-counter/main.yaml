name: initialize-iteration-counter
description: Sets up the initial state for the iteration process.
tags:
  - iteration
  - counter
  - initialization
inputs:
  iteration_cap:
    type: num
    description: Maximum number of iterations allowed.
    required: true
blocks:
  - id: initialize_counter
    type: WriteJSONState
    description: Initialize the iteration counter to zero and log the initial state with the iteration cap value.
    inputs:
      path: "{{tmp}}/iteration_state.json"
      data:
        iteration_counter: 0
        iteration_cap: "{{inputs.iteration_cap}}"

  - id: read_counter
    type: ReadJSONState
    description: Read back the initialized state to provide outputs.
    depends_on:
      - initialize_counter
    inputs:
      path: "{{tmp}}/iteration_state.json"
outputs:
  iteration_counter:
    value: "{{blocks.read_counter.outputs.data.iteration_counter}}"
    type: num
    description: Counter initialized to track the number of iterations.
