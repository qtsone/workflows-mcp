name: cortex-memory-get
description: |
  Atomic capability: Retrieve value from memory.
  Used to recall knowledge from previous cells.

tags: [cortex, capability, atomic, memory]

inputs:
  state:
    type: str
    description: Path to SQLite state database.
    required: true

  key:
    type: str
    description: Memory key to retrieve.
    required: true

  default:
    type: str
    description: Default value if key not found (JSON string).
    required: false
    default: ""

blocks:
  - id: get
    type: Workflow
    inputs:
      workflow: agent-state-management
      inputs:
        state: "{{ inputs.state }}"
        op: memory
        memory_op: get
        memory_key: "{{ inputs.key }}"
        memory_default: "{{ inputs.default }}"
        caller: "cortex-memory-get"

outputs:
  value:
    value: "{{ blocks.get.outputs.memory.value }}"
    type: str
    description: Retrieved value.

  exists:
    value: "{{ blocks.get.outputs.memory.exists | default(false) }}"
    type: bool
    description: Whether key existed.

  key:
    value: "{{ inputs.key }}"
    type: str
    description: Key that was retrieved.
