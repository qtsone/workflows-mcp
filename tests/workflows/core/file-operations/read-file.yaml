name: file-operations-read
description: Test ReadFile with different encodings and optional files
tags: [test, core, files, read]
inputs:
  test_dir:
    type: str
    default: "/tmp/test-read-file"
    description: "Directory for test files"
blocks:
  - id: setup
    type: Shell
    inputs:
      command: |
        mkdir -p "{{inputs.test_dir}}"
        echo "Test content with 你好" > "{{inputs.test_dir}}/test.txt"
  - id: read_existing
    type: ReadFile
    inputs:
      path: "{{inputs.test_dir}}/test.txt"
      encoding: "utf-8"
    depends_on: [setup]
  - id: read_nonexistent_optional
    type: ReadFile
    inputs:
      path: "{{inputs.test_dir}}/nonexistent.txt"
      required: false
    depends_on: [setup]
  - id: cleanup
    type: Shell
    inputs:
      command: rm -rf "{{inputs.test_dir}}"
    depends_on: [read_existing, read_nonexistent_optional]
outputs:
  file_read:
    value: "{{blocks.read_existing.succeeded}}"
    type: bool
  content_has_data:
    value: "{{blocks.read_existing.outputs.content}}"
    type: str
  optional_not_found:
    value: "{{blocks.read_nonexistent_optional.succeeded}}"
    type: bool
  cleanup_done:
    value: "{{blocks.cleanup.succeeded}}"
    type: bool
