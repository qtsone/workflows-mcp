name: file-operations-template-render
description: Test RenderTemplate with Jinja2 templates and variables
tags: [test, core, files, templates]
inputs:
  project_name:
    type: str
    default: "TestProject"
    description: "Project name for template"
  test_dir:
    type: str
    default: "/tmp/test-template-render"
    description: "Directory for template output"
blocks:
  - id: create_shell_data
    type: Shell
    inputs:
      command: echo "data_from_shell"
  - id: render_template
    type: RenderTemplate
    inputs:
      template: |
        # {{ project_name }}

        Generated: {{ timestamp }}
        Shell Output: {{ shell_data }}

        ## Features
        {% for feature in features %}
        - {{ feature }}
        {% endfor %}
      variables:
        project_name: "{{inputs.project_name}}"
        timestamp: "{{metadata.started_at}}"
        shell_data: "{{blocks.create_shell_data.outputs.stdout}}"
        features:
          - "Feature 1"
          - "Feature 2"
          - "Feature 3"
      output_path: "{{inputs.test_dir}}/README.md"
      create_parents: true
    depends_on: [create_shell_data]
  - id: verify_file_created
    type: ReadFile
    inputs:
      path: "{{inputs.test_dir}}/README.md"
    depends_on: [render_template]
  - id: cleanup
    type: Shell
    inputs:
      command: rm -rf "{{inputs.test_dir}}"
    depends_on: [verify_file_created]
outputs:
  template_rendered:
    value: "{{blocks.render_template.succeeded}}"
    type: bool
  file_content:
    value: "{{blocks.verify_file_created.outputs.content}}"
    type: str
  cleanup_done:
    value: "{{blocks.cleanup.succeeded}}"
    type: bool
