{
  "status": "success",
  "outputs": {
    "completed": "true",
    "iterations": "3"
  },
  "blocks": {
    "check_state_exists": {
      "inputs": {
        "path": "/tmp/test-recursion-state.json",
        "required": false
      },
      "outputs": {
        "data": {},
        "found": false,
        "path": "/private/tmp/test-recursion-state.json"
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 0.41796875,
        "started_at": "2025-11-02T10:36:09.125779+00:00",
        "completed_at": "2025-11-02T10:36:09.126197+00:00",
        "wave": 0,
        "execution_order": 0,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "initialize_state": {
      "inputs": {
        "path": "/tmp/test-recursion-state.json",
        "data": {
          "current": 0,
          "max": "3"
        }
      },
      "outputs": {
        "path": "/private/tmp/test-recursion-state.json",
        "size_bytes": 33
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 0.59912109375,
        "started_at": "2025-11-02T10:36:09.126471+00:00",
        "completed_at": "2025-11-02T10:36:09.127070+00:00",
        "wave": 1,
        "execution_order": 1,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "read_current_state": {
      "inputs": {
        "path": "/tmp/test-recursion-state.json"
      },
      "outputs": {
        "data": {
          "current": 0,
          "max": "3"
        },
        "found": true,
        "path": "/private/tmp/test-recursion-state.json"
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 0.138916015625,
        "started_at": "2025-11-02T10:36:09.127246+00:00",
        "completed_at": "2025-11-02T10:36:09.127385+00:00",
        "wave": 2,
        "execution_order": 2,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "increment": {
      "inputs": {
        "command": "CURRENT=0\nNEXT=$((CURRENT + 1))\necho $NEXT > \"$SCRATCH/next.txt\"\n"
      },
      "outputs": {
        "exit_code": 0,
        "stdout": "",
        "stderr": "",
        "number": 1
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 6.5009765625,
        "started_at": "2025-11-02T10:36:09.127588+00:00",
        "completed_at": "2025-11-02T10:36:09.134080+00:00",
        "wave": 3,
        "execution_order": 3,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "update_state": {
      "inputs": {
        "path": "/tmp/test-recursion-state.json",
        "updates": {
          "current": "1"
        }
      },
      "outputs": {
        "path": "/private/tmp/test-recursion-state.json",
        "created": false,
        "merged_data": {
          "current": "1",
          "max": "3"
        }
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 0.30712890625,
        "started_at": "2025-11-02T10:36:09.134508+00:00",
        "completed_at": "2025-11-02T10:36:09.134816+00:00",
        "wave": 4,
        "execution_order": 4,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "check_continue": {
      "inputs": {
        "command": "CURRENT=1\nMAX=3\nif [ $CURRENT -lt $MAX ]; then\n  exit 0  # Continue\nelse\n  exit 1  # Done\nfi\n"
      },
      "outputs": {
        "exit_code": 0,
        "stdout": "",
        "stderr": ""
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 5.5498046875,
        "started_at": "2025-11-02T10:36:09.135002+00:00",
        "completed_at": "2025-11-02T10:36:09.140541+00:00",
        "wave": 5,
        "execution_order": 5,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "recurse": {
      "inputs": {
        "workflow": "composition-recursion",
        "inputs": {
          "count": "3",
          "state_file": "/tmp/test-recursion-state.json"
        }
      },
      "outputs": {
        "completed": "false",
        "iterations": "3"
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 28.281982421875,
        "started_at": "2025-11-02T10:36:09.141038+00:00",
        "completed_at": "2025-11-02T10:36:09.169322+00:00",
        "wave": 6,
        "execution_order": 6,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {
        "check_state_exists": {
          "inputs": {
            "path": "/tmp/test-recursion-state.json",
            "required": false
          },
          "outputs": {
            "data": {
              "current": "1",
              "max": "3"
            },
            "found": true,
            "path": "/private/tmp/test-recursion-state.json"
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 0.25390625,
            "started_at": "2025-11-02T10:36:09.141233+00:00",
            "completed_at": "2025-11-02T10:36:09.141488+00:00",
            "wave": 0,
            "execution_order": 0,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {},
          "depth": 0
        },
        "initialize_state": {
          "inputs": {},
          "outputs": {
            "path": "",
            "size_bytes": 0
          },
          "metadata": {
            "status": "skipped",
            "outcome": "n/a",
            "execution_time_ms": 0.0,
            "started_at": "2025-11-02T10:36:09.141637+00:00",
            "completed_at": "2025-11-02T10:36:09.141637+00:00",
            "wave": 1,
            "execution_order": 1,
            "message": "Condition 'not {{blocks.check_state_exists.outputs.found}}' evaluated to False",
            "succeeded": false,
            "failed": false,
            "skipped": true
          },
          "blocks": {},
          "depth": 0
        },
        "read_current_state": {
          "inputs": {
            "path": "/tmp/test-recursion-state.json"
          },
          "outputs": {
            "data": {
              "current": "1",
              "max": "3"
            },
            "found": true,
            "path": "/private/tmp/test-recursion-state.json"
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 0.14306640625,
            "started_at": "2025-11-02T10:36:09.141714+00:00",
            "completed_at": "2025-11-02T10:36:09.141857+00:00",
            "wave": 2,
            "execution_order": 1,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {},
          "depth": 0
        },
        "increment": {
          "inputs": {
            "command": "CURRENT=1\nNEXT=$((CURRENT + 1))\necho $NEXT > \"$SCRATCH/next.txt\"\n"
          },
          "outputs": {
            "exit_code": 0,
            "stdout": "",
            "stderr": "",
            "number": 2
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 5.77783203125,
            "started_at": "2025-11-02T10:36:09.141974+00:00",
            "completed_at": "2025-11-02T10:36:09.147742+00:00",
            "wave": 3,
            "execution_order": 2,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {},
          "depth": 0
        },
        "update_state": {
          "inputs": {
            "path": "/tmp/test-recursion-state.json",
            "updates": {
              "current": "2"
            }
          },
          "outputs": {
            "path": "/private/tmp/test-recursion-state.json",
            "created": false,
            "merged_data": {
              "current": "2",
              "max": "3"
            }
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 0.4189453125,
            "started_at": "2025-11-02T10:36:09.148060+00:00",
            "completed_at": "2025-11-02T10:36:09.148483+00:00",
            "wave": 4,
            "execution_order": 3,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {},
          "depth": 0
        },
        "check_continue": {
          "inputs": {
            "command": "CURRENT=2\nMAX=3\nif [ $CURRENT -lt $MAX ]; then\n  exit 0  # Continue\nelse\n  exit 1  # Done\nfi\n"
          },
          "outputs": {
            "exit_code": 0,
            "stdout": "",
            "stderr": ""
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 5.169921875,
            "started_at": "2025-11-02T10:36:09.148642+00:00",
            "completed_at": "2025-11-02T10:36:09.153803+00:00",
            "wave": 5,
            "execution_order": 4,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {},
          "depth": 0
        },
        "recurse": {
          "inputs": {
            "workflow": "composition-recursion",
            "inputs": {
              "count": "3",
              "state_file": "/tmp/test-recursion-state.json"
            }
          },
          "outputs": {
            "completed": "false",
            "iterations": "3"
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 14.43603515625,
            "started_at": "2025-11-02T10:36:09.154040+00:00",
            "completed_at": "2025-11-02T10:36:09.168476+00:00",
            "wave": 6,
            "execution_order": 5,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {
            "check_state_exists": {
              "inputs": {
                "path": "/tmp/test-recursion-state.json",
                "required": false
              },
              "outputs": {
                "data": {
                  "current": "2",
                  "max": "3"
                },
                "found": true,
                "path": "/private/tmp/test-recursion-state.json"
              },
              "metadata": {
                "status": "completed",
                "outcome": "success",
                "execution_time_ms": 0.2099609375,
                "started_at": "2025-11-02T10:36:09.154226+00:00",
                "completed_at": "2025-11-02T10:36:09.154435+00:00",
                "wave": 0,
                "execution_order": 0,
                "message": null,
                "succeeded": true,
                "failed": false,
                "skipped": false
              },
              "blocks": {},
              "depth": 0
            },
            "initialize_state": {
              "inputs": {},
              "outputs": {
                "path": "",
                "size_bytes": 0
              },
              "metadata": {
                "status": "skipped",
                "outcome": "n/a",
                "execution_time_ms": 0.0,
                "started_at": "2025-11-02T10:36:09.154572+00:00",
                "completed_at": "2025-11-02T10:36:09.154572+00:00",
                "wave": 1,
                "execution_order": 1,
                "message": "Condition 'not {{blocks.check_state_exists.outputs.found}}' evaluated to False",
                "succeeded": false,
                "failed": false,
                "skipped": true
              },
              "blocks": {},
              "depth": 0
            },
            "read_current_state": {
              "inputs": {
                "path": "/tmp/test-recursion-state.json"
              },
              "outputs": {
                "data": {
                  "current": "2",
                  "max": "3"
                },
                "found": true,
                "path": "/private/tmp/test-recursion-state.json"
              },
              "metadata": {
                "status": "completed",
                "outcome": "success",
                "execution_time_ms": 0.200927734375,
                "started_at": "2025-11-02T10:36:09.154640+00:00",
                "completed_at": "2025-11-02T10:36:09.154839+00:00",
                "wave": 2,
                "execution_order": 1,
                "message": null,
                "succeeded": true,
                "failed": false,
                "skipped": false
              },
              "blocks": {},
              "depth": 0
            },
            "increment": {
              "inputs": {
                "command": "CURRENT=2\nNEXT=$((CURRENT + 1))\necho $NEXT > \"$SCRATCH/next.txt\"\n"
              },
              "outputs": {
                "exit_code": 0,
                "stdout": "",
                "stderr": "",
                "number": 3
              },
              "metadata": {
                "status": "completed",
                "outcome": "success",
                "execution_time_ms": 6.214111328125,
                "started_at": "2025-11-02T10:36:09.155039+00:00",
                "completed_at": "2025-11-02T10:36:09.161248+00:00",
                "wave": 3,
                "execution_order": 2,
                "message": null,
                "succeeded": true,
                "failed": false,
                "skipped": false
              },
              "blocks": {},
              "depth": 0
            },
            "update_state": {
              "inputs": {
                "path": "/tmp/test-recursion-state.json",
                "updates": {
                  "current": "3"
                }
              },
              "outputs": {
                "path": "/private/tmp/test-recursion-state.json",
                "created": false,
                "merged_data": {
                  "current": "3",
                  "max": "3"
                }
              },
              "metadata": {
                "status": "completed",
                "outcome": "success",
                "execution_time_ms": 0.294921875,
                "started_at": "2025-11-02T10:36:09.161507+00:00",
                "completed_at": "2025-11-02T10:36:09.161802+00:00",
                "wave": 4,
                "execution_order": 3,
                "message": null,
                "succeeded": true,
                "failed": false,
                "skipped": false
              },
              "blocks": {},
              "depth": 0
            },
            "check_continue": {
              "inputs": {
                "command": "CURRENT=3\nMAX=3\nif [ $CURRENT -lt $MAX ]; then\n  exit 0  # Continue\nelse\n  exit 1  # Done\nfi\n"
              },
              "outputs": {
                "exit_code": 1,
                "stdout": "",
                "stderr": ""
              },
              "metadata": {
                "status": "completed",
                "outcome": "failure",
                "execution_time_ms": 5.5009765625,
                "started_at": "2025-11-02T10:36:09.161972+00:00",
                "completed_at": "2025-11-02T10:36:09.167468+00:00",
                "wave": 5,
                "execution_order": 4,
                "message": "Command exited with code 1",
                "succeeded": false,
                "failed": true,
                "skipped": false
              },
              "blocks": {},
              "depth": 0
            },
            "recurse": {
              "inputs": {},
              "outputs": {},
              "metadata": {
                "status": "skipped",
                "outcome": "n/a",
                "execution_time_ms": 0.0,
                "started_at": "2025-11-02T10:36:09.167622+00:00",
                "completed_at": "2025-11-02T10:36:09.167622+00:00",
                "wave": 6,
                "execution_order": 5,
                "message": "Parent dependency did not complete successfully",
                "succeeded": false,
                "failed": false,
                "skipped": true
              },
              "blocks": {},
              "depth": 0
            },
            "read_final_state": {
              "inputs": {
                "path": "/tmp/test-recursion-state.json"
              },
              "outputs": {
                "data": {
                  "current": "3",
                  "max": "3"
                },
                "found": true,
                "path": "/private/tmp/test-recursion-state.json"
              },
              "metadata": {
                "status": "completed",
                "outcome": "success",
                "execution_time_ms": 0.241943359375,
                "started_at": "2025-11-02T10:36:09.167815+00:00",
                "completed_at": "2025-11-02T10:36:09.168058+00:00",
                "wave": 7,
                "execution_order": 5,
                "message": null,
                "succeeded": true,
                "failed": false,
                "skipped": false
              },
              "blocks": {},
              "depth": 0
            },
            "cleanup": {
              "inputs": {},
              "outputs": {
                "exit_code": 0,
                "stdout": "",
                "stderr": ""
              },
              "metadata": {
                "status": "skipped",
                "outcome": "n/a",
                "execution_time_ms": 0.0,
                "started_at": "2025-11-02T10:36:09.168130+00:00",
                "completed_at": "2025-11-02T10:36:09.168130+00:00",
                "wave": 8,
                "execution_order": 6,
                "message": "Parent dependency did not complete successfully",
                "succeeded": false,
                "failed": false,
                "skipped": true
              },
              "blocks": {},
              "depth": 0
            }
          },
          "depth": 2
        },
        "read_final_state": {
          "inputs": {
            "path": "/tmp/test-recursion-state.json"
          },
          "outputs": {
            "data": {
              "current": "3",
              "max": "3"
            },
            "found": true,
            "path": "/private/tmp/test-recursion-state.json"
          },
          "metadata": {
            "status": "completed",
            "outcome": "success",
            "execution_time_ms": 0.128173828125,
            "started_at": "2025-11-02T10:36:09.168645+00:00",
            "completed_at": "2025-11-02T10:36:09.168773+00:00",
            "wave": 7,
            "execution_order": 6,
            "message": null,
            "succeeded": true,
            "failed": false,
            "skipped": false
          },
          "blocks": {},
          "depth": 0
        },
        "cleanup": {
          "inputs": {},
          "outputs": {
            "exit_code": 0,
            "stdout": "",
            "stderr": ""
          },
          "metadata": {
            "status": "skipped",
            "outcome": "n/a",
            "execution_time_ms": 0.0,
            "started_at": "2025-11-02T10:36:09.168823+00:00",
            "completed_at": "2025-11-02T10:36:09.168823+00:00",
            "wave": 8,
            "execution_order": 7,
            "message": "Parent dependency did not complete successfully",
            "succeeded": false,
            "failed": false,
            "skipped": true
          },
          "blocks": {},
          "depth": 0
        }
      },
      "depth": 1
    },
    "read_final_state": {
      "inputs": {
        "path": "/tmp/test-recursion-state.json"
      },
      "outputs": {
        "data": {
          "current": "3",
          "max": "3"
        },
        "found": true,
        "path": "/private/tmp/test-recursion-state.json"
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 0.152099609375,
        "started_at": "2025-11-02T10:36:09.169833+00:00",
        "completed_at": "2025-11-02T10:36:09.169987+00:00",
        "wave": 7,
        "execution_order": 7,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    },
    "cleanup": {
      "inputs": {
        "command": "rm -f \"/tmp/test-recursion-state.json\""
      },
      "outputs": {
        "exit_code": 0,
        "stdout": "",
        "stderr": ""
      },
      "metadata": {
        "status": "completed",
        "outcome": "success",
        "execution_time_ms": 7.73095703125,
        "started_at": "2025-11-02T10:36:09.170372+00:00",
        "completed_at": "2025-11-02T10:36:09.178098+00:00",
        "wave": 8,
        "execution_order": 8,
        "message": null,
        "succeeded": true,
        "failed": false,
        "skipped": false
      },
      "blocks": {},
      "depth": 0
    }
  },
  "metadata": {
    "workflow_name": "composition-recursion",
    "start_time": "2025-11-02T10:36:09.125644+00:00",
    "total_blocks": 9,
    "execution_waves": 9,
    "completed_at": "2025-11-02T10:36:09.178652+00:00",
    "execution_time_seconds": 0.053080081939697266,
    "secret_access_count": 0
  }
}